# Анализа
Приметимо да је $K <= 1000000$, па уколико ми можемо да у $О(1)$ проверимо да ли су сви бројеви једнаки неком броју у истом правоугаонику, ми можемо решити задатак у $О(К)$, што је сложеност која је довољно добра. Уколико посматрамо све вредности које су једнаке неком броју $А$, једини кандидат за добар правоугаоник који садржи само бројеве $А$ је најмањи правоугаоник који садржи све њих (уколико би био неки већи, сигурно би постојао број који није једнак том броју, уколико би био неки мањи, постојао би број једнак том броју који није у њему). Сада, провера да ли је тај правоуганик добар је еквивалентна провери да ли је површина тог правоугаоника једнака броју појављивања броја $А$ у матрици (зато што свако појављивање тог броја мора бити у том правоугаонику).
# Смернице за алгоритам
Прво, желимо да унапред израчунамо, за сваки број, који је његов одговорајући правоугаоник. Он ће се простирати од најмањег реда у ком постоји тај број до највећег, и од најмање колоне у којој постоји тај број, до највеће. Такође, можемо израчунати и број појављивања сваког броја. Онда, једном петљом, идемо по свих бројевима од $1$ до $К$ и проверавамо да ли је кандидат правоуганик добар, у $О(1)$.
Што се тиче сложености, треба нам $О(N^2)$ за препроцесирање, и $О(К)$ за све провере, тако да је укупна сложеност $О(N^2 + K)$.
