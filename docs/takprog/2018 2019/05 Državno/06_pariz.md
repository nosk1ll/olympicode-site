## Анализа

### Потпроблем 1

Праволинијско решење се добија тако што се свака атракција посматра као последња на тури коју је обишла Ана. Ако је фиксирана последња атракција, онда се комплетна тура добија тако што се крене последње атракције и 'враћа уназад' померајући се сваки пут до атракције од које води једини пут до атракције у којој се тренутно налазимо. Наравно, током померања се сабирају лепоте атракција које је Ана посетила. Поступак се прекида у тренутка када би се наредним кораком враћања премашило укупно време које Ана има на располагању.

### Потпроблем 2

Решење се добија уз малу дораду решења за потпроблем 1. Полазећи од атракције $А$ и враћајући се дуж пута који води до тренутне атракције, пре или касније ћемо затворити петљу. Може се одредити време да се обиђу све атракције на петљи, а затим и колико пута се та петља може обићи а да се не премаши време $T$. На крају ако је остало времена треба започети још један пролаз кроз петљу и зауставити се у тренутку када време премаши време $T$. Наравно, током поступка је одређивана сума лепота атракција које су обиђене.

### Потпроблем 3

Овај потпроблем се може решити као и потпроблем 2, при чему не крећемо сваки пут од атракције која је на крају туре, већ користимо резултате од претходног обиласка. 


### Потпроблем 4

Ако је низ $X$ пермутација бројева од $1$ до $N$, онда сви путеви образују колекцију петљи (циклуса). За сваку петљу је довољно одредити чвор од кога треба кренути како би се добила максимална сума лепота атракција које су посећене. То се може обавити и линеарном времену (линеарном по броју атракција на петљи), коришћењем два показивача (индекса): један за почетак туре, а други за крај туре.

### Потпроблем 5

 Максимални број поена се добија тако што се за сваку атракцију $A$ одреди сума лепота атракција (као и време потребно да се обиђу те атракције) на тури која се завршава на атракција $A$ и чија је дужина $2^I$ ($I=0, 1, 2, ... \lfloor \log T\rfloor$). Дужина туре је једнака броју атракција на тури. То се може обавити у сложености $O(N \times \log T)$. Наиме, ако знамо суме атракција за туре дужине $2^{I-1}$, онда суму за туру дужине $2^I$ која се завршава на атракцији $A$ добијамо тако што надовежемо две туре дужине $2^{I-1}$: туру која се завршава на атракцији $A$ и туру која се завршава у чвору од кога води пут до почетка туре дужине $2^{I-1}$ која се завршава на атракцији $A$. 

Када смо  одредили описане суме тура, онда је потребно за сваку атракцију одредити туру максималне дужине која се завршава у тој атракцији. То обављамо тако што комбинујемо туре одређене у претходном пасусу. Почињемо са туром дужине $2^{\lfloor\log T\rfloor}$. Ако је време потребно за њен обилазак веће од дозвољеног преполовимо дужину (тј. поделимо са 2). Ако време није веће, додајемо ту туру на комплетну туру, померамо се на атракцију на којој та тура почиње (тачније на атракцију која претходи атракцији на којој та тура почиње) и настављамо са туром двоструко краћом од оне која је додата. 

   
 
